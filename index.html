<!DOCTYPE html>
<html lang="vi">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0" />
		<title>Dashboard BÃ¡o cÃ¡o Tá»•ng quan</title>
		<link
			rel="shortcut icon"
			href="./images//dashboard.png"
			type="image/x-icon" />
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
				background: linear-gradient(135deg, #74b9ff, #0984e3);
				min-height: 100vh;
				padding: 20px;
			}

			.dashboard {
				max-width: 1400px;
				margin: 0 auto;
				background: rgba(255, 255, 255, 0.95);
				border-radius: 20px;
				padding: 30px;
				box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
				backdrop-filter: blur(10px);
			}

			.header {
				text-align: center;
				margin-bottom: 40px;
				padding-bottom: 20px;
				border-bottom: 2px solid #e0e0e0;
			}

			.header h1 {
				color: #2c3e50;
				font-size: 2.5rem;
				margin-bottom: 10px;
				font-weight: 700;
			}

			.header p {
				color: #7f8c8d;
				font-size: 1.1rem;
			}

			.time-filter {
				display: flex;
				justify-content: center;
				gap: 15px;
				margin-bottom: 30px;
			}

			.filter-btn {
				padding: 10px 20px;
				border: 2px solid #3498db;
				background: white;
				color: #3498db;
				border-radius: 25px;
				cursor: pointer;
				font-weight: 700;
				transition: all 0.3s ease;
				font-size: 22px;
			}

			.filter-btn:hover,
			.filter-btn.active {
				background: #3498db;
				color: white;
				transform: translateY(-2px);
				box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
			}

			.kpi-cards {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
				gap: 20px;
				margin-bottom: 40px;
			}

			.kpi-card {
				background: #0370c4;
				color: white;
				padding: 25px;
				border-radius: 15px;
				text-align: center;
				box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
				transition: transform 0.3s ease;
			}

			.kpi-card:hover {
				transform: translateY(-5px);
			}

			.kpi-card h3 {
				font-size: 26px;
				margin-bottom: 10px;
				opacity: 0.9;
			}

			.kpi-value {
				font-size: 2.5rem;
				font-weight: 700;
				margin-bottom: 5px;
			}

			.kpi-change {
				font-size: 1.1em;
				opacity: 0.8;
				font-weight: bold;
			}

			.kpi-change.positive {
				color: #2ecc71;
			}

			.kpi-change.negative {
				color: #e74c3c;
			}

			.charts-container {
				display: grid;
				grid-template-columns: 2fr 1fr;
				gap: 30px;
				margin-bottom: 30px;
			}

			.chart-card {
				background: white;
				padding: 25px;
				border-radius: 15px;
				box-shadow: 0 5px 25px rgba(0, 0, 0, 0.1);
				border: 1px solid #e0e0e0;
				font-size: 2rem;
			}

			.chart-title {
				font-size: 2rem;
				font-weight: 600;
				margin-bottom: 20px;
				color: #2c3e50;
				text-align: center;
			}

			.chart-container {
				position: relative;
				height: 300px;
			}

			.bottom-charts {
				display: grid;
				grid-template-columns: 1fr 1fr;
				gap: 25px;
			}

			.route-chart {
				height: 350px;
			}

			.payment-chart {
				height: 350px;
			}

			@media (max-width: 768px) {
				.charts-container {
					grid-template-columns: 1fr;
				}

				.bottom-charts {
					grid-template-columns: 1fr;
				}

				.kpi-cards {
					grid-template-columns: 1fr;
				}

				.header h1 {
					font-size: 2rem;
				}
			}

			.loading {
				display: flex;
				justify-content: center;
				align-items: center;
				height: 200px;
				font-size: 1.2rem;
				color: #7f8c8d;
			}

			.export-btn {
				background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
				color: white;
				padding: 12px 25px;
				border: none;
				border-radius: 25px;
				cursor: pointer;
				font-weight: 600;
				margin-top: 20px;
				transition: all 0.3s ease;
				font-size: 22px;
			}

			.export-btn:hover {
				transform: translateY(-2px);
				box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);
			}

			.dashboard > .header {
				background: linear-gradient(135deg, #74b9ff, #0984e3);
				padding: 20px 0;
				box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
				text-align: center;
				margin-bottom: 40px;
				padding-bottom: 20px;
				border-bottom: 2px solid #e0e0e0;
			}

			.dashboard > .header > .nav {
				display: flex;
				justify-content: center;
				gap: 30px;
			}

			.dashboard > .header > .nav a {
				color: white;
				text-decoration: none;
				font-size: 30px;
				font-weight: 500;
				padding: 12px 25px;
				border-radius: 25px;
				transition: all 0.3s ease;
				position: relative;
				overflow: hidden;
			}

			.dashboard > .header > .nav a::before {
				content: "";
				position: absolute;
				top: 0;
				left: -100%;
				width: 100%;
				height: 100%;
				background: rgba(255, 255, 255, 0.1);
				transition: left 0.4s ease;
			}

			.dashboard > .header > .nav a:hover::before {
				left: 0;
			}

			.dashboard > .header.nav a:hover {
				transform: translateY(-3px);
				box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
				background-color: rgba(255, 255, 255, 0.1);
			}
		</style>
	</head>
	<body>
		<div class="dashboard">
			<header class="header">
				<nav class="nav">
					<a href="./index.html">Tá»•ng quan</a>
					<a href="./analysis_customer.html">KhÃ¡ch hÃ ng</a>
					<a href="./statistic_ticket_time.html">VÃ©</a>
				</nav>
			</header>

			<div
				class="header"
				style="background: linear-gradient(135deg, #ff6b6b, #4ecdc4)">
				<h1 style="color: white; font-size: 50px">
					ğŸ“Š Dashboard BÃ¡o cÃ¡o Tá»•ng quan
				</h1>
				<p style="color: white; font-size: 26px">
					Há»‡ thá»‘ng quáº£n lÃ½ nhÃ  xe - Theo dÃµi KPI vÃ  hiá»‡u suáº¥t kinh
					doanh
				</p>
			</div>

			<div class="time-filter">
				<button
					class="filter-btn active"
					onclick="changeTimeFilter('day')">
					HÃ´m nay
				</button>
				<button
					class="filter-btn"
					onclick="changeTimeFilter('week')">
					Tuáº§n nÃ y
				</button>
				<button
					class="filter-btn"
					onclick="changeTimeFilter('month')">
					ThÃ¡ng nÃ y
				</button>
				<button
					class="filter-btn"
					onclick="changeTimeFilter('quarter')">
					QuÃ½ nÃ y
				</button>
			</div>

			<div class="kpi-cards">
				<div class="kpi-card">
					<h3>ğŸ’° Tá»•ng Doanh Thu</h3>
					<div
						class="kpi-value"
						id="revenue">
						2,450,000â‚«
					</div>
					<div class="kpi-change positive">+12.5% so vá»›i hÃ´m qua</div>
				</div>
				<div class="kpi-card">
					<h3>ğŸ« Sá»‘ VÃ© ÄÃ£ BÃ¡n</h3>
					<div
						class="kpi-value"
						id="tickets">
						1,247
					</div>
					<div class="kpi-change positive">+8.3% so vá»›i hÃ´m qua</div>
				</div>
				<div class="kpi-card">
					<h3>ğŸšŒ Tá»· Lá»‡ Láº¥p Äáº§y</h3>
					<div
						class="kpi-value"
						id="occupancy">
						78.5%
					</div>
					<div class="kpi-change negative">-2.1% so vá»›i hÃ´m qua</div>
				</div>
				<div class="kpi-card">
					<h3>ğŸ“ˆ Sá»‘ Chuyáº¿n Xe</h3>
					<div
						class="kpi-value"
						id="trips">
						156
					</div>
					<div class="kpi-change positive">+5.2% so vá»›i hÃ´m qua</div>
				</div>
			</div>

			<div class="charts-container">
				<div class="chart-card">
					<h3 class="chart-title">
						ğŸ“ˆ Biá»ƒu Äá»“ Doanh Thu Theo Thá»i Gian
					</h3>
					<div class="chart-container">
						<canvas id="revenueChart"></canvas>
					</div>
				</div>

				<div class="chart-card">
					<h3 class="chart-title">ğŸ¥§ PhÆ°Æ¡ng Thá»©c Thanh ToÃ¡n</h3>
					<div class="chart-container">
						<canvas id="paymentChart"></canvas>
					</div>
				</div>
			</div>

			<div class="bottom-charts">
				<div class="chart-card">
					<h3 class="chart-title">ğŸ›£ï¸ Sá»‘ VÃ© BÃ¡n Theo Tuyáº¿n ÄÆ°á»ng</h3>
					<div class="chart-container route-chart">
						<canvas id="routeChart"></canvas>
					</div>
				</div>

				<div class="chart-card">
					<h3 class="chart-title">â° Doanh Thu Theo Giá»</h3>
					<div class="chart-container">
						<canvas id="hourlyChart"></canvas>
					</div>
				</div>
			</div>

			<div style="text-align: center">
				<button
					class="export-btn"
					onclick="exportReport()">
					ğŸ“Š Xuáº¥t BÃ¡o CÃ¡o
				</button>
			</div>
		</div>

		<script>
			// Dá»¯ liá»‡u máº«u
			const sampleData = {
				day: {
					revenue: [
						"6:00",
						"8:00",
						"10:00",
						"12:00",
						"14:00",
						"16:00",
						"18:00",
						"20:00",
					],
					revenueValues: [
						120000, 320000, 280000, 450000, 380000, 420000, 350000,
						125000,
					],
					kpis: {
						revenue: "2,450,000â‚«",
						tickets: "1,247",
						occupancy: "78.5%",
						trips: "156",
					},
				},
				week: {
					revenue: ["T2", "T3", "T4", "T5", "T6", "T7", "CN"],
					revenueValues: [
						2200000, 2450000, 2680000, 2850000, 3200000, 2900000,
						2100000,
					],
					kpis: {
						revenue: "18,380,000â‚«",
						tickets: "9,847",
						occupancy: "82.3%",
						trips: "1,156",
					},
				},
				month: {
					revenue: ["Tuáº§n 1", "Tuáº§n 2", "Tuáº§n 3", "Tuáº§n 4"],
					revenueValues: [18380000, 22450000, 19680000, 21850000],
					kpis: {
						revenue: "82,360,000â‚«",
						tickets: "42,847",
						occupancy: "79.8%",
						trips: "4,856",
					},
				},
				quarter: {
					revenue: ["ThÃ¡ng 1", "ThÃ¡ng 2", "ThÃ¡ng 3"],
					revenueValues: [82360000, 95450000, 88680000],
					kpis: {
						revenue: "266,490,000â‚«",
						tickets: "152,847",
						occupancy: "81.2%",
						trips: "15,256",
					},
				},
			};

			let currentFilter = "day";
			let charts = {};

			// Khá»Ÿi táº¡o biá»ƒu Ä‘á»“
			function initCharts() {
				// Biá»ƒu Ä‘á»“ doanh thu theo thá»i gian
				const revenueCtx = document
					.getElementById("revenueChart")
					.getContext("2d");
				charts.revenue = new Chart(revenueCtx, {
					type: "line",
					data: {
						labels: sampleData[currentFilter].revenue,
						datasets: [
							{
								label: "Doanh thu (â‚«)",
								data: sampleData[currentFilter].revenueValues,
								borderColor: "#3498db",
								backgroundColor: "rgba(52, 152, 219, 0.1)",
								borderWidth: 3,
								fill: true,
								tension: 0.4,
								pointBackgroundColor: "#3498db",
								pointBorderColor: "#fff",
								pointBorderWidth: 2,
								pointRadius: 6,
							},
						],
					},
					options: {
						responsive: true,
						maintainAspectRatio: false,
						plugins: {
							legend: {
								display: false,
							},
						},
						scales: {
							y: {
								beginAtZero: true,
								ticks: {
									callback: function (value) {
										return (
											new Intl.NumberFormat(
												"vi-VN"
											).format(value) + "â‚«"
										);
									},
								},
							},
						},
					},
				});

				// Biá»ƒu Ä‘á»“ phÆ°Æ¡ng thá»©c thanh toÃ¡n
				const paymentCtx = document
					.getElementById("paymentChart")
					.getContext("2d");
				charts.payment = new Chart(paymentCtx, {
					type: "doughnut",
					data: {
						labels: [
							"Tiá»n máº·t",
							"Tháº» tÃ­n dá»¥ng",
							"VÃ­ Ä‘iá»‡n tá»­",
							"Chuyá»ƒn khoáº£n",
						],
						datasets: [
							{
								data: [45, 25, 20, 10],
								backgroundColor: [
									"#e74c3c",
									"#3498db",
									"#2ecc71",
									"#f39c12",
								],
								borderWidth: 0,
							},
						],
					},
					options: {
						responsive: true,
						maintainAspectRatio: false,
						plugins: {
							legend: {
								position: "bottom",
							},
						},
					},
				});

				// Biá»ƒu Ä‘á»“ vÃ© bÃ¡n theo tuyáº¿n Ä‘Æ°á»ng
				const routeCtx = document
					.getElementById("routeChart")
					.getContext("2d");
				charts.route = new Chart(routeCtx, {
					type: "bar",
					data: {
						labels: [
							"HCM-Cáº§n ThÆ¡",
							"HCM-VÅ©ng TÃ u",
							"HCM-ÄÃ  Láº¡t",
							"HCM-Nha Trang",
							"HCM-Phan Thiáº¿t",
						],
						datasets: [
							{
								label: "Sá»‘ vÃ© Ä‘Ã£ bÃ¡n",
								data: [320, 280, 180, 150, 120],
								backgroundColor: [
									"#3498db",
									"#2ecc71",
									"#e74c3c",
									"#f39c12",
									"#9b59b6",
								],
								borderRadius: 5,
							},
						],
					},
					options: {
						responsive: true,
						maintainAspectRatio: false,
						plugins: {
							legend: {
								display: false,
							},
						},
						scales: {
							y: {
								beginAtZero: true,
							},
						},
					},
				});

				// Biá»ƒu Ä‘á»“ doanh thu theo giá»
				const hourlyCtx = document
					.getElementById("hourlyChart")
					.getContext("2d");
				charts.hourly = new Chart(hourlyCtx, {
					type: "bar",
					data: {
						labels: [
							"6h-9h",
							"9h-12h",
							"12h-15h",
							"15h-18h",
							"18h-21h",
						],
						datasets: [
							{
								label: "Doanh thu (â‚«)",
								data: [450000, 680000, 520000, 780000, 420000],
								backgroundColor: "rgba(52, 152, 219, 0.8)",
								borderRadius: 5,
							},
						],
					},
					options: {
						responsive: true,
						maintainAspectRatio: false,
						plugins: {
							legend: {
								display: false,
							},
						},
						scales: {
							y: {
								beginAtZero: true,
								ticks: {
									callback: function (value) {
										return (
											new Intl.NumberFormat(
												"vi-VN"
											).format(value) + "â‚«"
										);
									},
								},
							},
						},
					},
				});
			}

			// Thay Ä‘á»•i bá»™ lá»c thá»i gian
			function changeTimeFilter(filter) {
				currentFilter = filter;

				// Cáº­p nháº­t UI
				document.querySelectorAll(".filter-btn").forEach((btn) => {
					btn.classList.remove("active");
				});
				event.target.classList.add("active");

				// Cáº­p nháº­t KPI
				updateKPIs();

				// Cáº­p nháº­t biá»ƒu Ä‘á»“ doanh thu
				updateRevenueChart();
			}

			// Cáº­p nháº­t KPI
			function updateKPIs() {
				const data = sampleData[currentFilter].kpis;
				document.getElementById("revenue").textContent = data.revenue;
				document.getElementById("tickets").textContent = data.tickets;
				document.getElementById("occupancy").textContent =
					data.occupancy;
				document.getElementById("trips").textContent = data.trips;
			}

			// Cáº­p nháº­t biá»ƒu Ä‘á»“ doanh thu
			function updateRevenueChart() {
				const data = sampleData[currentFilter];
				charts.revenue.data.labels = data.revenue;
				charts.revenue.data.datasets[0].data = data.revenueValues;
				charts.revenue.update();
			}

			// Xuáº¥t bÃ¡o cÃ¡o
			function exportReport() {
				alert(
					"Chá»©c nÄƒng xuáº¥t bÃ¡o cÃ¡o sáº½ Ä‘Æ°á»£c triá»ƒn khai trong phiÃªn báº£n tiáº¿p theo!"
				);
			}

			// Khá»Ÿi táº¡o khi trang Ä‘Æ°á»£c táº£i
			document.addEventListener("DOMContentLoaded", function () {
				initCharts();
			});
		</script>
	</body>
</html>
